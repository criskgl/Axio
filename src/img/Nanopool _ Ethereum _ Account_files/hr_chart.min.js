waitConfig(function(){$(function(){var pathArray=window.location.pathname.split("/");var address=pathArray[2];var workerUrl="";if(pathArray.length>3){var worker=pathArray[3];workerUrl="/"+worker}var groupingUnits=[["minute",[10,30]],["hour",[1,2,3,4,6]]];var hashrateChartConfig={useHighStocks:true,chart:{renderTo:"hashratechart",backgroundColor:"#FFFFFF",marginRight:40,marginBottom:60},legend:{enabled:true},rangeSelector:{buttons:[{type:"hour",count:1,text:"1h"},{type:"hour",count:3,text:"3h"},{type:"hour",count:6,text:"6h"},{type:"hour",count:12,text:"12h"},{type:"day",count:1,text:"1D"},{type:"all",count:1,text:"All"}],selected:3,inputEnabled:false},xAxis:{minRange:3600*1e3},yAxis:[{opposite:false,labels:{align:"right",x:-5,y:5},title:{text:"Hashrate, "+config.hashrateUnits,align:"middle",offset:40},height:"64%",lineWidth:2,floor:0,min:0,showFirstLabel:true,showLastLabel:true,tickPixelInterval:20},{opposite:false,labels:{align:"right",x:-5,y:5},title:{text:" Shares",align:"middle",offset:40},top:"70%",height:"30%",offset:0,lineWidth:2,floor:0,min:0,showFirstLabel:true,showLastLabel:true,tickPixelInterval:20}],scrollbar:{enabled:true,barBackgroundColor:"#c9c9c9",barBorderRadius:7,barBorderWidth:0,buttonBackgroundColor:"#c9c9c9",buttonBorderWidth:0,buttonBorderRadius:7,trackBackgroundColor:"none",trackBorderWidth:1,trackBorderRadius:8,trackBorderColor:"#CCC"},series:[{type:"areaspline",name:"Calculated hashrate",id:"calculated",dataGrouping:{units:groupingUnits,approximation:"average",enabled:true},tooltip:{valueDecimals:1,valueSuffix:" "+config.hashrateUnits},color:Highcharts.getOptions().colors[0],fillOpacity:.4,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(.2).get("rgba")]]}},{name:"2-hour SMA",type:"spline",algorithm:"SMA",color:Highcharts.getOptions().colors[5],dataGrouping:{units:groupingUnits,approximation:"average"},tooltip:{valueDecimals:1,valueSuffix:" "+config.hashrateUnits}},{type:"column",name:"Accepted shares",color:Highcharts.getOptions().colors[6],yAxis:1,dataGrouping:{units:groupingUnits,approximation:"sum"},tooltip:{valueDecimals:0}}]};if(worker==undefined||worker==null||worker==""){var exporting={buttons:{customButton:{x:5,onclick:function(){store.clear();location.reload(true)},symbol:undefined,verticalAlign:"bottom",text:"Force Reload"}}};hashrateChartConfig.exporting=exporting}if(config.hasReportedHashrate){hashrateChartConfig.series.push({type:"spline",name:"Reported hashrate",dataGrouping:{units:groupingUnits,approximation:"average",enabled:true},groupPadding:.1,tooltip:{valueDecimals:1,valueSuffix:" "+config.hashrateUnits},color:Highcharts.getOptions().colors[4],fillOpacity:.4})}$("#hr_chart").highcharts("StockChart",hashrateChartConfig);var chart=$("#hr_chart").highcharts();chart.showLoading();request("/hashratechart/"+address+workerUrl,120,function(data){var reportedHashrate=[];var calculatedHashrate=[];var shares=[];var avgHashrates=[];var tmp=data;if(tmp.length==0){chart.hideLoading();return}tmp.sort(function(a,b){return a.date-b.date});var avg=0;var period=12;var step=10*60;var data=[];data.push(tmp[0]);for(var i=1;i<tmp.length;i++){var p1=tmp[i-1].date;var p2=tmp[i].date;if(p2-p1>step){for(j=p1+step;j<p2;j+=step)data.push({date:j,shares:0,hashrate:0})}data.push(tmp[i])}var now=(new Date).getTime()/1e3;var last=tmp[tmp.length-1].date;if(now-last>step*4){for(j=last+step;j<now;j+=step)data.push({date:j,shares:0,hashrate:0})}for(var i=0;i<data.length;i++){avg=avg+data[i].shares;if(i>=period){avg-=data[i-period].shares}var dt=data[i].date*1e3;if(config.hasReportedHashrate){reportedHashrate.push([dt,data[i].hashrate/1e3])}shares.push([dt,data[i].shares]);calculatedHashrate.push([dt,data[i].shares*config.shareCoeff]);avgHashrates.push([dt,avg/period*config.shareCoeff])}chart.series[0].setData(calculatedHashrate,true);chart.series[1].setData(avgHashrates,true);chart.series[2].setData(shares,true);if(config.hasReportedHashrate){chart.series[3].setData(reportedHashrate,true)}chart.hideLoading()})})});
//# sourceMappingURL=hr_chart.min.map